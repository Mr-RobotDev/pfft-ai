(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[309],{6548:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article",function(){return l(2635)}])},3620:function(e,t,l){"use strict";var r=l(2920);l(1399);let s=async e=>(0,r.Am)(e,{position:"top-right",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light"});t.Z=s},2635:function(e,t,l){"use strict";l.r(t);var r=l(5893),s=l(7294),o=l(2105),n=l.n(o);l(1399);var x=l(1163),i=l(753),a=l(6278),c=l(5905),d=l(3299),p=l(6573),m=l(6616),u=l(3620),g=l(2920),h=l(9930);let f=()=>{var e,t;let l=(0,x.useRouter)(),o=l.query.headline,f=l.query.opinion,[b,v]=(0,s.useState)([]),[w,j]=(0,s.useState)(""),[y,N]=(0,s.useState)(!1),[S,_]=(0,s.useState)(null),[D,P]=(0,s.useState)(""),[k,E]=(0,s.useState)(!1),I=(0,d.useSession)().data,C=(0,d.useSession)().status,Z=()=>{E(!k)};(0,s.useEffect)(()=>{"loading"!==C&&F()},[I]);let O=async()=>{var e;let t={body:{},URL:"/api/amountDeduction?userID=".concat(null==I?void 0:null===(e=I.user)||void 0===e?void 0:e._id),method:"GET"};try{return await (0,c.Z)(t)}catch(e){console.error(e)}},T=async()=>{var e;let t={body:{},URL:"/api/getUserPayment?userID=".concat(null==I?void 0:null===(e=I.user)||void 0===e?void 0:e._id),method:"GET"};try{return await (0,c.Z)(t)}catch(e){console.error(e)}},F=async()=>{var e,t;let l=null!==(t=null==I?void 0:null===(e=I.user)||void 0===e?void 0:e._id)&&void 0!==t?t:JSON.parse(localStorage.pffting).id;j(""),_(null),N(!0);let r={body:{opinion:f,headline:o},URL:"/api/generateArticle?headline=".concat(o,"&userID=").concat(l," "),method:"POST"};try{let e=await (0,c.Z)(r);(null==e?void 0:e.error)?(j("No article found"),N(!1)):(j(null==e?void 0:e.article.article),_(null==e?void 0:e.blog_id),await (0,h.Cn)("".concat("http://localhost:3000/","blog?blogID=").concat(null==e?void 0:e.blog_id)).then(e=>{P(e)}),I&&O())}catch(e){console.error(e)}N(!1)};(0,s.useEffect)(()=>{let e=null==w?void 0:w.split("<br><br>").flatMap(e=>null==e?void 0:e.split("<br>"));v(e)},[w]);let L=async()=>{var e;let t={body:{},URL:"/api/getsubscriptionDetails?userID=".concat(null==I?void 0:null===(e=I.user)||void 0===e?void 0:e._id),method:"GET"};try{return await (0,c.Z)(t)}catch(e){console.error(e)}};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(a.o,{meta:(0,r.jsx)(i.h,{title:"Article",description:"Article"}),children:[(0,r.jsx)(g.Ix,{}),(0,r.jsxs)("div",{className:" grid-cols-5 gap-3    overflow-x-hidden   lg:grid   slg:flex slg:flex-col   flex flex-col   ",children:[(0,r.jsxs)("div",{className:"col-span-1 flex flex-col  items-center    xl:order-first xl:h-screen xl:justify-center    lg:order-first lg:h-screen lg:justify-center lg:flex-col   slg:order-2  slg:justify-center slg:flex-row   md:flex-row md:justify-center   order-2 justify-end    ",children:[(0,r.jsx)("button",{onClick:async()=>{if(!I){let e=await fetch("https://api.ipify.org?format=json"),{ip:t}=await e.json(),l=localStorage.pffting;l&&(l=JSON.parse(l)),l?l.count>=5?(0,u.Z)("Your 5 free attempts are completed. Please Login or Signup to re-generate."):(localStorage.setItem("pffting",JSON.stringify({...l,count:l.count+1})),F()):(localStorage.setItem("pffting",JSON.stringify({ip:t,count:1})),F());return}T().then(e=>{e.isFreeCredit?(null==e?void 0:e.credit)>0?F():(0,u.Z)("Please Subscribe to monthly plan."):L().then(e=>{let t=new Date().toLocaleDateString(),l=e.expiry,r=new Date(t),s=new Date(l);r>s?(0,u.Z)("Current date is after the expiry date"):r<s&&F()}).catch(e=>{console.error("Error fetching subscription details:",e)})})},className:"rounded-3xl bg-gradient-to-r from-orange-100 to-orange-200   2xl:w-[267px] 2xl:h-[106px] 2xl:mb-[3rem]  2xl:text-[32px]   xl:w-[180px] xl:h-[100px] xl:mb-[3rem]  xl:text-[28px]   lg:w-[150px] lg:h-[90px] lg:mb-[3rem] lg:text-[24px] lg:font-normal lg:mr-[0rem]   md:w-[210px] md:h-[100px] md:text-[32px] md:mr-3 md:mb-0   xs:w-[190px] xs:h-[56px]  xs:text-[20px]   slg:pr-0 slg:mr-2   w-[190px] h-[56px]  mb-[1rem] text-[20px]   text-slate-50 font-courierPrime  hover:bg-orange-300 font-light",children:"re-article"}),(0,r.jsx)("button",{onClick:()=>{l.push({pathname:"/"})},className:"rounded-3xl bg-gradient-to-r from-orange-100 to-orange-200   2xl:w-[267px] 2xl:h-[106px] 2xl:mb-[3rem]  2xl:text-[32px]   xl:w-[180px] xl:h-[100px] xl:mb-[3rem]  xl:text-[28px]    lg:w-[150px] lg:h-[90px] lg:mb-[3rem] lg:text-[24px] lg:font-normal lg:ml-[0rem]   md:w-[210px] md:h-[100px] md:text-[32px]    xs:w-[190px] xs:h-[56px]  xs:text-[20px]   w-[190px] h-[56px] text-[20px]   text-slate-50 font-courierPrime  hover:bg-orange-300 font-light",children:"new pfft"})]}),(0,r.jsxs)("div",{className:"col-span-3    lg:text-left lg:px-1   xl:px-10   slg:px-10 slg:pb-5 slg:text-left   md:px-10 md:pb-7 md:pt-3 md:text-left   xms:px-5 xms:pb-5 xms:text-center   xs:px-5 xs:pb-5 xs:text-center   text-center px-4   ",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold font-copperplate mb-6 text-black-100",children:o}),(0,r.jsx)("div",{className:"md:flex-row items-center sm:flex flex-row text-center ",children:(0,r.jsxs)("div",{className:"border-b-[3px] border-[#D7D7D7] w-100 xxs:pb-6 sm:flex sm:flex-row text-center flex-row pb-2 ",children:[(0,r.jsxs)("h1",{className:"text-lg font-courierPrime text-[#44576D] pt-2",children:["by AI ",null==I?void 0:null===(e=I.user)||void 0===e?void 0:e.name]}),(0,r.jsx)("div",{className:"grid justify-center",children:(0,r.jsx)("div",{className:"bg-gradient-to-r from-orange-100 to-orange-200 hover:bg-orange-100  w-fit    text-white text-center my-3 sm:my-0 sm:mx-3   text-sm rounded-full font-copperplate py-2 px-4",children:"@PFFT.AI"})})]})}),y?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)(n(),{color:"orange",size:20})}):(0,r.jsx)("div",{className:"font-courierPrime mt-10 text-[22px]",children:null==b?void 0:b.map((e,t)=>(0,r.jsx)("div",{className:"mb-2",dangerouslySetInnerHTML:{__html:e}},t))})]}),(0,r.jsx)("div",{className:"col-span-1 flex flex-col  items-center    xl:order-3 xl:h-screen xl:justify-center    lg:order-3 lg:h-screen lg:justify-center   slg:order-2  slg:justify-start    order-2  justify-end mb-10",children:(0,r.jsxs)("div",{className:"relative",style:{minHeight:"100px"},children:[(0,r.jsx)("button",{className:"rounded-3xl bg-gradient-to-r from-orange-100 to-orange-200 mb-7   2xl:w-[267px] 2xl:h-[106px]  2xl:text-[32px]   xl:w-[180px] xl:h-[100px]  xl:text-[30px]   lg:w-[150px] lg:h-[90px] lg:mb-[1rem] lg:text-[24px] lg:font-normal   md:w-[210px] md:h-[100px] md:text-[32px] md:mt-[0.5rem]   xs:w-[190px] xs:h-[56px]  xs:text-[20px]   w-[190px] h-[56px] text-[20px]   text-slate-50 font-courierPrime",disabled:null===S,onClick:Z,children:"Share"}),k&&S&&(0,r.jsx)("div",{className:"border-2 border-[#FF4738] bg-white rounded-2xl shadow-lg w-full",children:(0,r.jsxs)("ul",{className:"flex justify-around",children:[(0,r.jsx)(p.Z,{url:D,hashtag:"#pfft",children:(0,r.jsx)("img",{className:"inset-0 object-cover w-[40px] h-[40px]   md:w-[30px] md:h-[30px]   xl:w-[40px] xl:h-[40px]  ",src:"/assets/images/facebook.png",alt:"Facebook"})}),(0,r.jsx)(m.Z,{url:D,title:o,via:null==I?void 0:null===(t=I.user)||void 0===t?void 0:t.name,children:(0,r.jsx)("img",{className:"inset-0 object-cover w-[40px] h-[40px]   md:w-[30px] md:h-[30px]   xl:w-[40px] xl:h-[40px] ",src:"/assets/images/twitter.png",alt:"Twitter"})})]})})]})})]})]})})};t.default=f}},function(e){e.O(0,[379,201,182,774,888,179],function(){return e(e.s=6548)}),_N_E=e.O()}]);